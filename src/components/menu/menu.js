import{carregarConteudoSobre as e}from"../../js/sobre.js";import{carregarConteudoContato as t}from"../../js/contato.js";import{carregarProjetos as n}from"../../js/projetos.js";import{defaultLang as a,fetchData as o,langSelection as r}from"../../js/api.js";function carregarMenu(){o(r()).then(e=>{let t=e.find(e=>"menu"===e.id);document.getElementById("botao-sobre").innerHTML=`<li>${t.sobre}</li>`,document.getElementById("botao-projetos").innerHTML=`<li>${t.projetos}</li>`,document.getElementById("botao-contato").innerHTML=`<li>${t.contato}</li>`;let n=e.find(e=>"menu-idiomas"===e.id);document.getElementById("lista-idiomas").innerHTML="",Object.entries(n).forEach(([e,t])=>{if("id"!==e){let n=document.createElement("a");n.href="#",n.dataset.lang=e,n.src=t.src,n.alt=t.alt,n.classList.add("langSelection");let a=document.createElement("img");a.loading="lazy",a.src=n.src,a.alt=n.alt,n.appendChild(a),n.addEventListener("click",function(){document.getElementById("base").lang=n.dataset.lang,carregarPagina(window.location.hash.substring(1)),carregarMenu()}),document.getElementById("lista-idiomas").appendChild(n)}})})}export function carregarPagina(a){fetch(`/public/${a}.html`).then(e=>e.text()).then(o=>{window.location.hash=a,document.getElementById("content-container").innerHTML=o;let r=document.createElement("link");r.rel="stylesheet",r.href=`/src/css/${a}.css`,document.head.appendChild(r),"sobre"===a?e():"projetos"===a?n():"contato"===a&&t();let i=document.querySelectorAll(".conteudos a");i.forEach(e=>e.classList.remove("active"));let l=document.querySelector(`.conteudos a[href="#${a}"]`);l&&l.classList.add("active")})}export function inicializarMenu(){document.getElementById("base").lang=a(),carregarMenu(),fetch("/src/components/menu/menu.html").then(e=>e.text()).then(e=>{document.getElementById("menu-container").innerHTML=e;let t=document.createElement("link");t.rel="stylesheet",t.href="/src/components/menu/menu.css",document.head.appendChild(t),document.getElementById("botao-idiomas").addEventListener("click",function(){var e=this.querySelector(".lista-idiomas");e.style.display="none"===e.style.display?"grid":"none"}),document.getElementById("botao-projetos").addEventListener("click",function(){carregarPagina("projetos")}),document.getElementById("botao-sobre").addEventListener("click",function(){carregarPagina("sobre")}),document.getElementById("botao-contato").addEventListener("click",function(){carregarPagina("contato")})})}